\documentclass[12pt]{article}

\usepackage{styles/sbc-template}

\usepackage[T1]{fontenc}
\usepackage{mathptmx}
\usepackage{graphicx,url}
\usepackage[utf8]{inputenc}
\usepackage[brazil]{babel}

\usepackage[hidelinks]{hyperref}

% Define o caminho das imagens
\graphicspath{{images/}}

\sloppy

\title{Análise da Criptografia Ponta-a-Ponta: Do Axolotl às Implementações Massivas no WhatsApp e Matrix}

\author{Luiz Antônio Lima de Freitas Leite\inst{1}, Max José Lobato Pantoja Junior\inst{1}, \\Wesley Pontes Barbosa\inst{1}}

\address{Instituto de Ciências Exatas e Naturais (ICEN) -- Universidade Federal Pará\\ Belém, PA -- Brasil
\email{\{luiz.freitas.leite,max.junior,wesley.pontes.barbosa\}@icen.ufpa.br}
}

\begin{document} 

\maketitle



% RESUMO - TODOS 
\input{sections/abstract}

% SEÇÃO 1: INTRODUÇÃO - MAX 
\input{sections/introduction}

% SEÇÃO 2: FUNDAMENTAÇÃO TEÓRICA - MAX 
\input{sections/concepts}

% SEÇÃO 3: O PROTOCOLO KERBEROS - LA 
\input{sections/kerberos_protocol}

% SEÇÃO 4: ESTUDO DE CASO - WESLEY 
\input{sections/case_study}

% SEÇÃO 5: CONCLUSÃO - TODOS 
\input{sections/conclusion}



\section{Introdução}
A segurança em comunicações digitais evoluiu de modelos baseados em criptografia de transporte (como TLS/SSL) para a Criptografia Ponta-a-Ponta (E2EE), onde nem mesmo o provedor do serviço tem acesso ao conteúdo. O protagonista dessa mudança é o Protocolo Signal.

\subsection{História e o Nome Axolotl}
O protocolo foi desenvolvido pela \textit{Open Whisper Systems}, liderada por Moxie Marlinspike e Trevor Perrin. Inicialmente, o mecanismo central de criptografia não se chamava "Signal", mas sim \textbf{Axolotl}.

O nome foi escolhido em homenagem ao axolote (\textit{Ambystoma mexicanum}), uma salamandra aquática conhecida por sua impressionante capacidade de auto-regeneração. Essa analogia biológica referia-se à propriedade de "auto-cura" (\textit{self-healing}) do protocolo: se uma chave de sessão for comprometida por um atacante, o algoritmo rotaciona as chaves automaticamente na próxima mensagem, "curando" a segurança da conversa e impedindo que o atacante decifre mensagens futuras \cite{perrin2016double}.

Em 2016, para simplificar a nomenclatura e evitar confusões de marcas registradas, o nome foi oficialmente alterado para \textbf{Signal Protocol}, unificando a marca do aplicativo e da tecnologia subjacente.

\section{Conceitos Básicos}
Para compreender o funcionamento do Protocolo Signal, é necessário definir certas propriedades criptográficas fundamentais que ele visa garantir:

\begin{itemize}
    \item \textbf{Sigilo Perfeito Encaminhado (Forward Secrecy):} Garante que, se a chave privada de um usuário for roubada hoje, as mensagens trocadas no passado permaneçam seguras. Isso é obtido através da geração de chaves de sessão efêmeras que são descartadas após o uso.
    \item \textbf{Segurança Pós-Comprometimento (Post-Compromise Security):} Também conhecida como "Break-in Recovery". Refere-se à capacidade do protocolo de restabelecer a segurança após um comprometimento temporário das chaves, através da atualização contínua do material criptográfico.
    \item \textbf{Diffie-Hellman (DH):} Um método que permite a duas partes, que não têm conhecimento prévio uma da outra, estabelecerem conjuntamente uma chave secreta compartilhada em um canal inseguro.
\end{itemize}

\section{O Protocolo Signal}
O Protocolo Signal combina o algoritmo de acordo de chaves X3DH e o algoritmo Double Ratchet. O código é aberto e auditável, hospedado no GitHub da organização \textit{Signal Messenger}, dividido em bibliotecas para o protocolo (\texttt{libsignal}), clientes (Android, iOS e Desktop) e servidor.

\subsection{O Algoritmo Double Ratchet}
O coração do protocolo é o Double Ratchet (Catraca Dupla). Ele gerencia a rotação contínua das chaves de criptografia de mensagens. O termo "catraca" implica que o processo avança em uma direção e não pode ser revertido (garantindo o \textit{Forward Secrecy}). O algoritmo utiliza duas camadas de derivação de chaves:

\begin{enumerate}
    \item \textbf{Diffie-Hellman Ratchet:} Ocorre quando há troca de mensagens. As partes renovam suas chaves públicas DH, alterando a "raiz" da cadeia de chaves. Isso fornece a propriedade de auto-cura.
    \item \textbf{Symmetric-Key Ratchet (Hash):} Ocorre para cada mensagem enviada dentro da mesma sessão DH. Uma função de derivação de chaves (KDF) gera uma nova chave de mensagem a partir da anterior.
\end{enumerate}

\begin{figure}[ht]
\centering
% \includegraphics[width=0.8\textwidth]{double-ratchet-diagram.png}
\caption{Diagrama conceitual do Double Ratchet: A KDF Chain deriva chaves de mensagem, enquanto o DH Ratchet atualiza a KDF Chain.}
\label{fig:ratchet}
\end{figure}

Essa arquitetura garante que cada mensagem seja criptografada com uma chave única que nunca é reutilizada.

\section{Estudos de Caso e Implementações}

\subsection{WhatsApp: Privacidade vs. Metadados}
O WhatsApp é a implementação mais popular do Protocolo Signal. Embora o protocolo seja licenciado sob a GPLv3 (que exigiria que softwares derivados também fossem de código aberto), o WhatsApp mantém seu código fechado (proprietário).

Isso é possível porque o WhatsApp não simplesmente copiou o código do repositório público; eles firmaram um acordo comercial específico com a Open Whisper Systems em 2014 para integrar a biblioteca \textit{libsignal} em sua infraestrutura antes que as obrigações estritas da GPL fossem aplicadas à sua base de código final \cite{marlinspike2016whatsapp}.

\subsubsection{A Polêmica dos Metadados (2021)}
Embora o conteúdo das mensagens no WhatsApp seja protegido pela mesma criptografia do Signal, o modelo de negócios da Meta (controladora do WhatsApp) baseia-se na exploração de \textbf{metadados}.

Em janeiro de 2021, o WhatsApp atualizou seus Termos de Serviço e Política de Privacidade, gerando reação global e migração em massa para o Signal e Telegram. A atualização explicitou a coleta de dados que não são protegidos pela criptografia ponta-a-ponta. Conforme a seção "Informações que coletamos" da política \cite{whatsapp_privacy_2021}:

\begin{itemize}
    \item \textbf{Dados de Atividade:} Tempo, frequência e duração das interações.
    \item \textbf{Grafo Social:} Quem fala com quem (remetente e destinatário).
    \item \textbf{Informações do Dispositivo:} Modelo de hardware, sistema operacional, nível de bateria, força do sinal e identificadores únicos.
    \item \textbf{Endereço IP:} Usado para estimar a localização geral.
\end{itemize}

Ao contrário do aplicativo Signal, que desenhou seu sistema para minimizar o conhecimento do servidor (usando técnicas como \textit{Sealed Sender}), o WhatsApp centraliza metadados, permitindo a construção de perfis comportamentais detalhados dos usuários, mesmo sem ler o conteúdo textual das mensagens.

\subsection{Matrix e Olm/Megolm}
O Matrix é um padrão aberto para comunicação descentralizada e federada. Diferente do Signal (que é centralizado), o Matrix permite que servidores diferentes conversem entre si. Para garantir segurança nesse ambiente, o Matrix desenvolveu a biblioteca \textbf{Olm}.

Olm é uma implementação do algoritmo Double Ratchet do Signal, escrita em C++ e adaptada para a arquitetura do Matrix. No entanto, o algoritmo original do Signal é "pesado" para grupos grandes (complexidade $O(N^2)$), pois exige o estabelecimento de sessões individuais par-a-par.

Para resolver isso, o Matrix introduziu o \textbf{Megolm}. O Megolm sacrifica a propriedade de "auto-cura" imediata (o \textit{break-in recovery} é mais lento) em troca de escalabilidade massiva para grupos com milhares de usuários. No Megolm, cada participante cria uma sessão de saída ("outbound") e compartilha a chave da catraca com os outros participantes via canais seguros Olm \cite{matrix_spec}. Isso permite criptografia eficiente em ambientes federados sem quebrar as propriedades fundamentais de confidencialidade.

\section{Conclusão}
A evolução do algoritmo Axolotl para o onipresente Protocolo Signal redefiniu a segurança na internet. A tecnologia provou ser robusta contra adversários estatais e corporativos no que tange à confidencialidade do conteúdo.

Entretanto, a análise das implementações do WhatsApp e Matrix revela que o protocolo é apenas uma peça do quebra-cabeça. No caso do WhatsApp, a segurança criptográfica convive com a vigilância de metadados sancionada pelos termos de uso. No caso do Matrix, vemos a adaptação do protocolo (Megolm) para garantir soberania de dados através da federação. Conclui-se que a "privacidade" é um conceito mais amplo que a "criptografia", dependendo tanto da matemática dos algoritmos quanto da ética das implementações.

\bibliographystyle{bib/sbc}
\bibliography{bib/sbc-template}

\end{document}